# 应用管理功能修复计划

## 问题分析

1. **应用编辑报错**：在 `saveEditApplication` 函数中，变量名不匹配
   - 获取了 `enableKeywordMatching`、`enableRegexMatching`、`enableSemanticMatching` 变量
   - 但在 JSON.stringify 中使用了 `enableKeyword`、`enableRegex`、`enableSemantic` 变量

2. **应用新建界面不可设置策略**：`addApplicationForm` 表单中没有包含策略设置的选项
   - 缺少关键词匹配、正则匹配、语义匹配、LLM兜底的设置

## 实现计划

### [x] 任务 1：修复应用编辑函数中的变量名不匹配问题
- **优先级**：P0
- **依赖**：无
- **描述**：修改 `saveEditApplication` 函数中的变量名，确保获取和使用的变量名一致
- **成功标准**：应用编辑功能能够正常保存，不再报错
- **测试要求**：
  - `programmatic` TR-1.1：编辑应用时能够成功保存
  - `programmatic` TR-1.2：编辑应用后，策略设置能够正确保存

### [x] 任务 2：扩展应用新建表单，添加策略设置选项
- **优先级**：P1
- **依赖**：无
- **描述**：在 `addApplicationForm` 表单中添加策略设置选项，与 `editApplicationForm` 保持一致
- **成功标准**：应用新建表单包含策略设置选项
- **测试要求**：
  - `programmatic` TR-2.1：应用新建表单显示策略设置选项
  - `human-judgment` TR-2.2：策略设置选项的布局与编辑表单一致

### [x] 任务 3：修改应用新建函数，包含策略设置参数
- **优先级**：P1
- **依赖**：任务 2
- **描述**：修改 `saveNewApplication` 函数，包含策略设置的参数
- **成功标准**：新建应用时能够设置策略，并且策略设置能够正确保存
- **测试要求**：
  - `programmatic` TR-3.1：新建应用时能够成功保存策略设置
  - `programmatic` TR-3.2：新建应用后，策略设置能够正确显示在编辑表单中

## 测试验证流程

1. **测试应用编辑功能**：
   - 打开应用编辑表单
   - 修改策略设置
   - 保存应用
   - 验证保存成功，无错误提示
   - 重新打开编辑表单，验证策略设置保持不变

2. **测试应用新建功能**：
   - 打开应用新建表单
   - 验证表单包含策略设置选项
   - 填写应用信息并设置策略
   - 保存应用
   - 验证保存成功，无错误提示
   - 打开新建应用的编辑表单，验证策略设置正确显示